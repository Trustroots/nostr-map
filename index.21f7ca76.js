!function(e,t,r,l,o){var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a="function"==typeof n[l]&&n[l],s=a.cache||{},i="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function d(t,r){if(!s[t]){if(!e[t]){var o="function"==typeof n[l]&&n[l];if(!r&&o)return o(t,!0);if(a)return a(t,!0);if(i&&"string"==typeof t)return i(t);var u=Error("Cannot find module '"+t+"'");throw u.code="MODULE_NOT_FOUND",u}f.resolve=function(r){var l=e[t][1][r];return null!=l?l:r},f.cache={};var c=s[t]=new d.Module(t);e[t][0].call(c.exports,f,c,c.exports,this)}return s[t].exports;function f(e){var t=f.resolve(e);return!1===t?{}:d(t)}}d.isParcelRequire=!0,d.Module=function(e){this.id=e,this.bundle=d,this.exports={}},d.modules=e,d.cache=s,d.parent=a,d.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(d,"root",{get:function(){return n[l]}}),n[l]=d;for(var u=0;u<t.length;u++)d(t[u]);if(r){var c=d(r);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd&&define(function(){return c})}}({dB2Fs:[function(e,t,r){var l=e("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(r),l.export(r,"startup",()=>f);var o=e("leaflet"),n=e("../build"),a=e("./map"),s=e("./nostr"),i=e("./nostr/keys"),d=e("./nostr/relays"),u=e("./onboarding"),c=e("./welcome");let f=async()=>{let e=await (0,i.hasPrivateKey)();document.getElementById("help").onclick=e=>{e.preventDefault(),(0,a.hackSidePanelOpen)()};let t=document.getElementById("build-id");null!==t&&(t.textContent=n.BUILD_SHA||"local");let r=o.DomUtil.get("loggedIn"),l=o.DomUtil.get("loggedOut");if(e){o.DomUtil.addClass(r,"show"),o.DomUtil.addClass(l,"hide"),document.getElementById("signout").onclick=async()=>{await (0,i.unsetPrivateKey)(),globalThis.location.reload()},await (0,i.getPublicKey)();let e=await (0,i.getNpubPublicKey)(),t=await (0,i.getNsecPrivateKey)(),n=globalThis.document.getElementById("npubPublicKey"),a=document.createElement("a");a.href=`https://njump.me/${e}`,a.target="_blank",a.innerText=e,n.appendChild(a),globalThis.document.getElementById("nsecPrivateKey").innerText=t}else o.DomUtil.addClass(r,"hide"),o.DomUtil.addClass(l,"show"),document.getElementById("signup").onclick=()=>{(0,u.startUserOnboarding)(),(0,a.hackSidePanelClosed)()};let f=document.getElementById("relays"),m=JSON.stringify(await (0,s.getRelays)());f.value=m;let p=document.getElementById("relays_submit");p.onclick=async e=>{e.preventDefault(),p.setAttribute("disabled","disabled");let t=f.value;try{let e=JSON.parse(t);if(!Array.isArray(e)){p.removeAttribute("disabled"),globalThis.alert("Invalid relays submitted. Please try again.");return}let r=0===e.length?(0,d.getDefaultRelays)():e;await (0,s.setRelays)({relays:r}),globalThis.alert("Relays saved."),globalThis.document.location.reload()}catch(e){p.removeAttribute("disabled"),globalThis.alert(`#vRuf1N Error saving relays
${e.toString()}`)}},(0,c.startWelcomeSequence)()};f()},{leaflet:"fJCTE","../build":"9Tstj","./map":"89CD3","./nostr":"batwW","./nostr/keys":"8qDuN","./nostr/relays":"esJOU","./onboarding":"35kbs","./welcome":"epjYR","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"9Tstj":[function(e,t,r){var l=e("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(r),l.export(r,"BUILD_SHA",()=>o);let o="08e55460f7b4b5398e087949a7aee56d6d480514"},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],epjYR:[function(e,t,r){var l=e("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(r),l.export(r,"startWelcomeSequence",()=>i);var o=e("sweetalert2"),n=l.interopDefault(o),a=e("./nostr/keys"),s=e("./utils");let i=async()=>{if(!await (0,a.hasPrivateKey)()){if(!await (0,s.confirmYesNo)("Notes is an experimental feature using an open developed protocol called NOSTR. Continue?")){await (0,n.default).fire({text:"This will become more user friendly in the future. Feel free to come back anytime. Now we'll take you back to the main trustroots site."}),globalThis.location.href="http://www.trustroots.org/search";return}(0,n.default).fire({text:"Great. Browse map to see other people's notes and right click (or long press on mobile) to add your own note. "})}}},{sweetalert2:"d7K5G","./nostr/keys":"8qDuN","./utils":"i8jxn","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}]},["dB2Fs"],"dB2Fs","parcelRequire31ee");
//# sourceMappingURL=index.21f7ca76.js.map
