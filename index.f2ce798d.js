!function(e,t,r,o,n){var l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a="function"==typeof l[o]&&l[o],s=a.cache||{},i="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function d(t,r){if(!s[t]){if(!e[t]){var n="function"==typeof l[o]&&l[o];if(!r&&n)return n(t,!0);if(a)return a(t,!0);if(i&&"string"==typeof t)return i(t);var u=Error("Cannot find module '"+t+"'");throw u.code="MODULE_NOT_FOUND",u}f.resolve=function(r){var o=e[t][1][r];return null!=o?o:r},f.cache={};var c=s[t]=new d.Module(t);e[t][0].call(c.exports,f,c,c.exports,this)}return s[t].exports;function f(e){var t=f.resolve(e);return!1===t?{}:d(t)}}d.isParcelRequire=!0,d.Module=function(e){this.id=e,this.bundle=d,this.exports={}},d.modules=e,d.cache=s,d.parent=a,d.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(d,"root",{get:function(){return l[o]}}),l[o]=d;for(var u=0;u<t.length;u++)d(t[u]);if(r){var c=d(r);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd&&define(function(){return c})}}({dB2Fs:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"startup",()=>c);var n=e("leaflet"),l=e("./map"),a=e("./nostr"),s=e("./nostr/keys"),i=e("./nostr/relays"),d=e("./onboarding"),u=e("./welcome");let c=async()=>{let e=await (0,s.hasPrivateKey)();document.getElementById("help").onclick=e=>{e.preventDefault(),(0,l.hackSidePanelOpen)()};let t=document.getElementById("build-id");null!==t&&(t.textContent=process.env.GITHUB_SHA||"dev");let r=n.DomUtil.get("loggedIn"),o=n.DomUtil.get("loggedOut");if(e){n.DomUtil.addClass(r,"show"),n.DomUtil.addClass(o,"hide"),document.getElementById("signout").onclick=async()=>{await (0,s.unsetPrivateKey)(),globalThis.location.reload()},await (0,s.getPublicKey)();let e=await (0,s.getNpubPublicKey)(),t=await (0,s.getNsecPrivateKey)(),l=globalThis.document.getElementById("npubPublicKey"),a=document.createElement("a");a.href=`https://njump.me/${e}`,a.target="_blank",a.innerText=e,l.appendChild(a),globalThis.document.getElementById("nsecPrivateKey").innerText=t}else n.DomUtil.addClass(r,"hide"),n.DomUtil.addClass(o,"show"),document.getElementById("signup").onclick=()=>{(0,d.startUserOnboarding)(),(0,l.hackSidePanelClosed)()};let c=document.getElementById("relays"),f=JSON.stringify(await (0,a.getRelays)());c.value=f;let m=document.getElementById("relays_submit");m.onclick=async e=>{e.preventDefault(),m.setAttribute("disabled","disabled");let t=c.value;try{let e=JSON.parse(t);if(!Array.isArray(e)){m.removeAttribute("disabled"),globalThis.alert("Invalid relays submitted. Please try again.");return}let r=0===e.length?(0,i.getDefaultRelays)():e;await (0,a.setRelays)({relays:r}),globalThis.alert("Relays saved."),globalThis.document.location.reload()}catch(e){m.removeAttribute("disabled"),globalThis.alert(`#vRuf1N Error saving relays
${e.toString()}`)}},(0,u.startWelcomeSequence)()};c()},{leaflet:"fJCTE","./map":"89CD3","./nostr":"batwW","./nostr/keys":"8qDuN","./nostr/relays":"esJOU","./onboarding":"35kbs","./welcome":"epjYR","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],epjYR:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"startWelcomeSequence",()=>i);var n=e("sweetalert2"),l=o.interopDefault(n),a=e("./nostr/keys"),s=e("./utils");let i=async()=>{if(!await (0,a.hasPrivateKey)()){if(!await (0,s.confirmYesNo)("Notes is an experimental feature using an open developed protocol called NOSTR. Continue?")){await (0,l.default).fire({text:"This will become more user friendly in the future. Feel free to come back anytime. Now we'll take you back to the main trustroots site."}),globalThis.location.href="http://www.trustroots.org/search";return}(0,l.default).fire({text:"Great. Browse map to see other people's notes and right click (or long press on mobile) to add your own note. "})}}},{sweetalert2:"d7K5G","./nostr/keys":"8qDuN","./utils":"i8jxn","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}]},["dB2Fs"],"dB2Fs","parcelRequire31ee");
//# sourceMappingURL=index.f2ce798d.js.map
